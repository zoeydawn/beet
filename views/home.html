<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{{title}}</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
  </head>
  <body>
    <header>
      <h1>{{title}}</h1>
      {{#if user}}
      <p>Welcome back, {{user.name}}!</p>
      <button hx-post="/logout" hx-target="#auth" hx-swap="outerHTML">
        Logout
      </button>
      {{else}}
      <div id="auth">
        <form hx-post="/login" hx-target="#auth" hx-swap="outerHTML">
          <input type="text" name="username" placeholder="Username" required />
          <input
            type="password"
            name="password"
            placeholder="Password"
            required
          />
          <button type="submit">Login</button>
        </form>
      </div>
      {{/if}}
    </header>

    <main>
      <h2>Articles</h2>
      <div id="articles">
        {{#each articles}}
        <article>
          <h3>{{this.title}}</h3>
          <p>{{this.body}}</p>
        </article>
        {{/each}}
      </div>

      <button hx-get="/articles/more" hx-target="#articles" hx-swap="beforeend">
        Load More
      </button>
    </main>

    <footer>
      <p>&copy; {{year}} My Fastify App</p>
    </footer>
  </body>
</html>
